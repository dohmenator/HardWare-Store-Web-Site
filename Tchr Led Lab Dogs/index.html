<html>

<head>
    <style>
        img {
            height: 60px;
            width: 60px
        }
    </style>
    <script>
        window.addEventListener("load", fetchDogs);

        function fetchDogs() {
            fetch("/Dog Inventory - Sheet1.csv")
                .then((response) => {
                    if (!response.ok) {
                        throw response.status;
                    }

                    return response.text();
                })
                .then((body) => body.split("\r\n"))
                .then((lines) => {
                    const headers = lines.shift().split(',');
                    const dogList = [];

                    for (const line of lines) {
                        const parts = line.split(',');
                        const dog = {};
                        for (let i = 0; i < parts.length; ++i) {
                            const column_name = headers[i];
                            dog[column_name] = parts[i];
                        }
                        dogList.push(dog);
                    }
                    return dogList;
                })
                .then(console.log)
                .catch((err) => {
                    console.error("Didn't get dogs: " + err);
                });
        }
    </script>
</head>

<body>
    <h1>Dohmen's Kennel Club</h1>
    <section id="filterContainer"></section>
    <section id="dogContainer"></section>
</body>

</html>